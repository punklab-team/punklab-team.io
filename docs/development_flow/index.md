# Флоу разработки

## Стандартные составляющие проекта

- **Техническая документация**. По разработке и запуску проекта должна быть написана документация в файле <a href="./technical_documentation/" target="_blank"><code>README.md</code></a> внутри репозитория;
- **Автотесты**. Функционал проекта должен быть покрыт тестами, которые можно запустить, чтобы убедиться в его работоспособности. Необходимо чтобы у проекта покрытие функционала тестами было не ниже 90%;
- **Правила написания кода**. В разработке необходимо применять линтеры для поддержания единого стиля кода и прекоммит чтобы быть уверенным что коммит который вы собираетесь запушить не содержит ошибок, а их правила должны быть описаны в конфигурационных файлах;
- **Документирование кода**. Основные модули и сложные сущности кода должны быть задокументированны, например, через комментарии в коде. Также хорошо будет если можно выгрузить эту документацию отдельно, например, с помощью <a href="https://github.com/sphinx-doc/sphinx" class="external-link" target="_blank">Sphinx</a>.

## Жизненный цикл разработки

### Проработка архитектуры

После утверждения проекта на разработку, команда разработки должна сформировать архитектуру. Процесс принятия архитектуры описан следующей диаграммой:

``` mermaid
sequenceDiagram
    participant ProductManager as Продуктовый менеджер
    participant TechLead as Техлид/Архитектор
    participant Developers as Команда разработчиков

    ProductManager->>TechLead: Обсуждение требований и задач
    TechLead->>Developers: Постановка задачи на проектирование архитектуры
    Developers->>Developers: Проектирование архитектуры приложения
    Developers->>TechLead: Предложение архитектурного решения

    TechLead->>TechLead: Анализ и ревью архитектуры
    TechLead->>Developers: Обратная связь и рекомендации по доработке

    Developers->>Developers: Внесение правок в архитектуру
    Developers->>TechLead: Обновленная версия архитектуры

    TechLead->>TechLead: Финальное утверждение архитектуры
    TechLead->>ProductManager: Передача утвержденной архитектуры в работу
```

1. Продуктовый менеджер передает требования и задачи техлиду.
2. Техлид ставит задачу команде разработчиков на создание архитектуры.
3. Разработчики проектируют архитектуру и представляют ее техлиду.
4. Техлид проводит ревью архитектуры и передает рекомендации по доработке.
5. Команда вносит необходимые правки, и техлид проводит финальное утверждение архитектуры.
6. После утверждения архитектура передается в работу.

### Инициализация проекта

На этом этапе необходимо базово сформировать проект и определить предварительную конфигурацию используемых технологий. Это может включать в себя следующее:

   * Определение структуры модулей;
   * Описание **.gitignore**;
   * Определение правил написания кода для линтера;
   * Описание проекта в **README.md** и т.д.

/// info | Информация
На этом этапе требуется лишь описание проекта в **README.md** файле, без техниеских подробностей. О том как составлять техническое описание проекта рассказано <a href="./technical_documentation/#_2" target="_blank">Техническая документация</a>.
///

### Разработка

Этот процесс описывает стандартный цикл разработки с код-ревью и CI/CD в команде.

/// info | Информация
Это лишь поверхностный взгляд на процесс разработки. Этот процесс включает в себя правила ветвления, правила ревью кода и прочии инструкции, о чем будет расказанно в последующих разделах более подробно.
///

``` mermaid
sequenceDiagram
    participant Manager as Менеджер
    participant Developer as Разработчик
    participant Reviewer as Ревьюер
    participant CI_CD as CI/CD
    participant Prod as Продакшн

    Manager->>Developer: Постановка задачи и передача требований
    Developer->>Developer: Написание и тестирование кода локально
    Developer->>Reviewer: Создание Pull Request для код-ревью
    Reviewer->>Reviewer: Анализ кода и оставление комментариев

    alt Код одобрен
        Reviewer->>Developer: Подтверждение Pull Request
        Developer->>CI_CD: Слияние изменений в основную ветку
        CI_CD->>CI_CD: Автоматическое тестирование и сборка
        alt Тесты прошли успешно
            CI_CD->>Prod: Деплой на продакшн
            Prod->>Manager: Оповещение о релизе
        else Ошибка в тестах
            CI_CD->>Developer: Сообщение об ошибках
            Developer->>CI_CD: Исправление и повторная отправка кода
        end
    else Требуются доработки
        Reviewer->>Developer: Замечания и запрос доработок
        Developer->>Developer: Внесение изменений
        Developer->>Reviewer: Повторная отправка на ревью
    end
```

Пояснение этапов:

1. **Менеджер** передает задачу и требования **Разработчику**.
2. **Разработчик** пишет и тестирует код локально, затем создает Pull Request для код-ревью.
3. **Ревьюер** проверяет код и оставляет комментарии:
   - Если код одобрен, Pull Request подтверждается, и **Разработчик** сливает изменения в основную ветку, что запускает CI/CD.
   - Если код требует доработок, **Ревьюер** возвращает его с комментариями. **Разработчик** вносит изменения и повторно отправляет код на ревью.
4. **CI/CD** выполняет тестирование и сборку:
   - Если тесты успешны, CI/CD деплоит код на **Продакшн**.
   - Если тесты не пройдены, CI/CD отправляет сообщение об ошибках, **Разработчик** исправляет их и отправляет код на повторную проверку.
5. После успешного деплоя **Продакшн** уведомляет **Менеджера** о релизе.

## Выводы

В этой главе мы узнали о жизненном цикле стандартных составляющих элеметах каждого проекта, о жизненно цикле проекта и увидели процесс определения архитектуры проекта и процесс разработки. 