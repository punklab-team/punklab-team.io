# Техническая документация

Здесь изложено описания требований к содержанию `README.md` файлу любого проекта который разрабатывается в команде Панклаба. 
/// info | Примичание
Это рекомендуемая инструкция которой стоит придерживаться при написании `README.md` файла, вы вольны добавить любые дополнительные главы к своему проекту или не использовать главы, которые для вас кажутся излишними для проекта.
///

## Описание проекта

В описании к этой главе должно содержаться описание проекта.

///example | Пример
Бэкенд часть проекта по личному кабинету воспитанника ФК Зенит.
///

### Локальный запуск

В этой главе должны быть описаны инструкции для запуска проекта. Если любой человек имея доступ к репозиторию захочет запустить  проект, то выполнив все действия из этой главы у него должно это получиться. Важно минимизировать количество обращений к разработчикам проекта.

#### Используемые программы

Список предустановленных программ с указанием версии используемой при разработке, которые должны быть установлены в системе при запуске проекта.

///example | Пример

- Node.js (v9.11.2)
- PostgreSQL (v14.1)
///

#### Установка зависимостей

Указания к установке зависимостей, через пакетный менеджер (npm, pip и т.д.). Если среди используемых программ из главы выше есть те, которые использую специфическую установку или донастройку, например, установка расширения для PostgreSQL, это также должно быть описано в этой главе.

///example | Пример
**Установка зависимостей для python**

```bash
python3.8 -m venv venv && source /venv/bin/activate
(venv) pip install -r requirements.txt
```

**Установка расширения POSTGIST (Ubuntu)**

```bash
sudo apt-get install postgis
sudo -u postgres psql
(psql) CREATE EXTENSION postgis;
```

///

#### Переменные окружения

Способ доставки переменных окружения в проект, а также список переменных и их описание.

///example | Пример
Необходимо создать файл `.env` на основе `.env.example` файла.

**Описание переменных окружения**

- `APP_HOST` - Хост запуска проекта
- `APP_PORT` - Порт запуска проекта
///

#### Запуск тестов

Описание команд для запуска тестов.

///example | Пример
```bash
(venv) coverage run -m pytest tests
(venv) coverage report
```
///

#### Запуск проекта

Описание команд для запуска проекта.

///example | Пример
**Запуск бэкенд части**

```bash
(venv) uvicorn main:app --reload --env-file .env
```

**Запуск celery планировщика**

```bash
(venv) celery -A celery_app.tasks beat --loglevel=info
```

**Запуск celery воркера**

```bash
(venv) celery -A celery_app.tasks worker --loglevel=info
```

///

### **Запуск проекта с помощью Docker-контейнеризации**

Содержит список команд для запуска проекта через docker.

///example | Пример
**Бэкенд**

```bash
docker run \
--name ${imageName} punklab:5000/${imageName}:latest
-p 0.0.0.0:3450:80 \
--network host \
--env-file ${ENV_FILE} \
-v ./static/players:/app/static/shared/players \
-v ./static/teams:/app/static/shared/teams \
-d
```

**Celery планировщик**

```bash
docker run \
--name ${imageName}_celery-beat punklab:5000/${imageName}:latest \
--network host \
--env-file ${ENV_FILE} \
-d \
celery -A celery_app.tasks beat --loglevel=info
```

**Celery воркер**

```bash
docker run \
--name ${imageName}_celery-worker punklab:5000/${imageName}:latest \
--network host \
--env-file ${ENV_FILE} \
-v ./static/players:/app/static/shared/player \
-v ./static/teams:/app/static/shared/teams \
-d \
celery -A celery_app.tasks worker --loglevel=info
```

///

### **Tools**

Содержит информацию о использовании разного рода утилит или других специальных командах, которые могут использоваться в разработке проекта или в любом другом его использовании.

///example | Пример
**Makefile**

- `run` - установка зависимостей python и запуск проекта.
- `venv` - установка зависимостей python.
- `test` - запуск тестов и вывод покрытия.
- `flake8-status` - проверка форматирования измененных файлов.
- `env-validate` - проверка .env на целостность с .env.example.
**CLI**
Получить список модулей:

```bash
(venv) python -m cli --help
```

Информация о командах модуля:

```bash
(venv) python -m cli <название модуля> --help
```

Вызов команды:

```bash
(venv) python -m cli <название модуля> <команда>
```

///

### Примечания

Описания, например, багов, и способы их лечения, которые могут возникнуть при работе с проектом. Тут также может содержаться любая другая информация, которую вы считаете нужным отметить в проекте и она не подошла ни в какую другую главу.
